{"ast":null,"code":"import _toConsumableArray from\"C:/Users/alexa/OneDrive/Desktop/eCommerce Template/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from'react';import{Link,useParams,useNavigate,useLocation}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import Message from'../components/Message';import{addToCart,removeFromCart}from'../actions/cartActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartScreen=function CartScreen(){var _useParams=useParams(),productId=_useParams.productId;var history=useNavigate();var location=useLocation();var qty=location.search?Number(location.search.split('=')[1]):1;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){history('/login?redirect=shipping');};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{children:[\"Your cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Select,{value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") items\"]}),\"$\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})})]});};export default CartScreen;","map":{"version":3,"names":["React","useEffect","Link","useParams","useNavigate","useLocation","useDispatch","useSelector","Row","Col","ListGroup","Image","Form","Button","Card","Message","addToCart","removeFromCart","CartScreen","productId","history","location","qty","search","Number","split","dispatch","cart","state","cartItems","removeFromCartHandler","id","checkoutHandler","length","map","item","image","name","product","price","e","target","value","Array","countInStock","keys","x","reduce","acc","toFixed"],"sources":["C:/Users/alexa/OneDrive/Desktop/eCommerce Template/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Link, useParams, useNavigate, useLocation } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Row, Col, ListGroup, Image, Form, Button, Card } from 'react-bootstrap'\r\nimport Message from '../components/Message'\r\nimport { addToCart, removeFromCart } from '../actions/cartActions'\r\n\r\nconst CartScreen = () => {\r\n  const { productId } = useParams()\r\n\r\n  const history = useNavigate()\r\n\r\n  const location = useLocation()\r\n\r\n  const qty = location.search ? Number(location.search.split('=')[1]) : 1\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const cart = useSelector((state) => state.cart)\r\n  const { cartItems } = cart\r\n\r\n  useEffect(() => {\r\n    if (productId) {\r\n      dispatch(addToCart(productId, qty))\r\n    }\r\n  }, [dispatch, productId, qty])\r\n\r\n  const removeFromCartHandler = (id) => {\r\n    dispatch(removeFromCart(id))\r\n  }\r\n\r\n  const checkoutHandler = () => {\r\n    history('/login?redirect=shipping')\r\n  }\r\n\r\n  return (\r\n    <Row>\r\n      <Col md={8}>\r\n        <h1>Shopping Cart</h1>\r\n\r\n        {cartItems.length === 0 ? (\r\n          <Message>\r\n            Your cart is empty <Link to='/'>Go Back</Link>\r\n          </Message>\r\n        ) : (\r\n          <ListGroup variant='flush'>\r\n            {cartItems.map((item) => (\r\n              <ListGroup.Item key={item.product}>\r\n                <Row>\r\n                  <Col md={2}>\r\n                    <Image src={item.image} alt={item.name} fluid rounded />\r\n                  </Col>\r\n\r\n                  <Col md={3}>\r\n                    <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                  </Col>\r\n\r\n                  <Col md={2}>${item.price}</Col>\r\n\r\n                  <Col md={2}>\r\n                    <Form.Select\r\n                      value={item.qty}\r\n                      onChange={(e) =>\r\n                        dispatch(\r\n                          addToCart(item.product, Number(e.target.value))\r\n                        )\r\n                      }\r\n                    >\r\n                      {[...Array(item.countInStock).keys()].map((x) => (\r\n                        <option key={x + 1} value={x + 1}>\r\n                          {x + 1}\r\n                        </option>\r\n                      ))}\r\n                    </Form.Select>\r\n                  </Col>\r\n\r\n                  <Col md={2}>\r\n                    <Button\r\n                      type='button'\r\n                      variant='light'\r\n                      onClick={() => removeFromCartHandler(item.product)}\r\n                    >\r\n                      <i className='fas fa-trash'></i>\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n            ))}\r\n          </ListGroup>\r\n        )}\r\n      </Col>\r\n\r\n      <Col md={4}>\r\n        <Card>\r\n          <ListGroup variant='flush'>\r\n            <ListGroup.Item>\r\n              <h2>\r\n                Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)})\r\n                items\r\n              </h2>\r\n              {/* Adds up the \"qty\" of every \"item\" in \"cartItems\" to render the total quantity of items in Shopping Cart */}\r\n              $\r\n              {cartItems\r\n                .reduce((acc, item) => acc + item.qty * item.price, 0)\r\n                .toFixed(2)}\r\n              {/* Adds up the \"price\" of every \"item\" in \"cartItems\" to render the total price of items in Shopping Cart */}\r\n              {/* The \".toFixed()\" method converts a number to a string, rounding it to a specified number of decimals; in this case, 2. */}\r\n            </ListGroup.Item>\r\n\r\n            <ListGroup.Item>\r\n              <Button\r\n                type='button'\r\n                className='btn-block'\r\n                disabled={cartItems.length === 0}\r\n                onClick={checkoutHandler}\r\n              >\r\n                Proceed To Checkout\r\n              </Button>\r\n              {/* Created a button that calls the \"checkoutHandler\" function when clicked. Button is Disabled if cart is empty. */}\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nexport default CartScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}